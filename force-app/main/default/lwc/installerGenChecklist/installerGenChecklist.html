<template>
    <div class="accordion" style="display: flex;" onclick={toggleSection}>
        <div style="max-width: 897px; flex: 1;"  class="headinf">Walk-In
             <lightning-icon style="margin:0.5rem;" size="xx-small" icon-position="right"
            icon-name={medTempIcon1}
            alternative-text={buttonLabel}></lightning-icon>
        </div>
    </div>
    <div class={section1Class}>
        <template if:true={isVisible}>
            <lightning-card>
                <div class="slds-m-around_medium">
                    <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Yes</th>
                                <th scope="col">No</th>
                                <th scope="col">Repairs Made</th>
                                <th scope="col">NA</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template for:each={questions} for:item="question" for:index="index">
                                <tr key={question.id}>
                                    <td data-label="Question" class="question-column"><p class="wrap-text">{question.Sr_Num__c}. {question.Question__c}</p></td>
                                    <td data-label="Yes">
                                        <lightning-input type="checkbox" value="Yes"  name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.yesChecked} onchange={handleYesChange}></lightning-input>
                                    </td>
                                    <td data-label="No">
                                        <lightning-input type="checkbox" value="No" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.noChecked} onchange={handleNoChange}></lightning-input>
                                    </td>
                                    <td data-label="Repairs Made">
                                        <lightning-input type="checkbox" value="Repairs Made" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.repairsMadeChecked} onchange={handleAddNoteClick}></lightning-input>
                                    </td>
                                    <td data-label="NA">
                                        <lightning-input type="checkbox" value="NA" data-id={question.SF_ApiName__c} onchange={handleOptionChange}></lightning-input>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </lightning-card>
        </template>
    </div>
    <div class="accordion" style="display: flex;" onclick={toggleSection}>
        <div style="max-width: 897px; flex: 1;"  class="headinf">Refrigeration – Evaporator Section for the Cooler
            <lightning-icon style="margin:0.5rem;" size="xx-small" icon-position="right"
                icon-name={medTempIcon2}
                alternative-text={buttonLabel}></lightning-icon>
        </div>
    </div>
    <div class={section2Class}>
        <template if:true={isVisible}>
            <lightning-card>
                <div class="slds-m-around_medium">
                    <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Yes</th>
                                <th scope="col">No</th>
                                <th scope="col">Repairs Made</th>
                                <th scope="col">NA</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template for:each={questions1} for:item="question" for:index="index">
                                <tr key={question.id}>
                                    <td data-label="Question" class="question-column"><p class="wrap-text">{question.Sr_Num__c}. {question.Question__c}</p></td>
                                    <td data-label="Yes">
                                        <lightning-input type="checkbox" value="Yes" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.yesChecked} onchange={handleYesChange}></lightning-input>
                                    </td>
                                    <td data-label="No">
                                        <lightning-input type="checkbox" value="No" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.noChecked} onchange={handleNoChange}></lightning-input>
                                    </td>
                                    <td data-label="Repairs Made">
                                        <lightning-input type="checkbox" value="Repairs Made" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.repairsMadeChecked} onchange={handleAddNoteClick}></lightning-input>
                                    </td>
                                    <td data-label="NA">
                                        <lightning-input type="checkbox" value="NA" data-id={question.SF_ApiName__c} onchange={handleOptionChange}></lightning-input>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </lightning-card>
        </template>
    </div>
    <div class="accordion" style="display: flex;" onclick={toggleSection}>
        <div style="max-width: 897px; flex: 1;"  class="headinf">Refrigeration – Evaporator Section for the Freezer
            <lightning-icon style="margin:0.5rem;" size="xx-small" icon-position="right"
                icon-name={medTempIcon3}
                alternative-text={buttonLabel}></lightning-icon>
        </div>
    </div>
    <div class={section3Class}>
        <template if:true={isVisible}>
            <lightning-card>
                <div class="slds-m-around_medium">
                    <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Yes</th>
                                <th scope="col">No</th>
                                <th scope="col">Repairs Made</th>
                                <th scope="col">NA</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template for:each={questions2} for:item="question" for:index="index">
                                <tr key={question.id}>
                                    <td data-label="Question" class="question-column"><p class="wrap-text">{question.Sr_Num__c}. {question.Question__c}</p></td>
                                    <td data-label="Yes">
                                        <lightning-input type="checkbox" value="Yes" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.yesChecked} onchange={handleYesChange}></lightning-input>
                                    </td>
                                    <td data-label="No">
                                        <lightning-input type="checkbox" value="No" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.noChecked} onchange={handleNoChange}></lightning-input>
                                    </td>
                                    <td data-label="Repairs Made">
                                        <lightning-input type="checkbox" value="Repairs Made" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.repairsMadeChecked} onchange={handleAddNoteClick}></lightning-input>
                                    </td>
                                    <td data-label="NA">
                                        <lightning-input type="checkbox" value="NA" data-id={question.SF_ApiName__c} onchange={handleOptionChange}></lightning-input>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </lightning-card>
        </template>
    </div>
    <div class="accordion" style="display: flex;" onclick={toggleSection}>
            <div style="max-width: 897px; flex: 1;"  class="headinf">Refrigeration – Condensing Unit for the Cooler
                <lightning-icon style="margin:0.5rem;" size="xx-small" icon-position="right"
                    icon-name={medTempIcon4} 
                    alternative-text={buttonLabel}></lightning-icon>
            </div>
    </div>
    <div class={section4Class}>
        <template if:true={isVisible}>
            <lightning-card>
                <div class="slds-m-around_medium">
                    <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Yes</th>
                                <th scope="col">No</th>
                                <th scope="col">Repairs Made</th>
                                <th scope="col">NA</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template for:each={questions3} for:item="question" for:index="index">
                                <tr key={question.id}>
                                    <td data-label="Question" class="question-column"><p class="wrap-text">{question.Sr_Num__c}. {question.Question__c}</p></td>
                                    <td data-label="Yes">
                                        <lightning-input type="checkbox" value="Yes" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.yesChecked} onchange={handleYesChange}></lightning-input>
                                    </td>
                                    <td data-label="No">
                                        <lightning-input type="checkbox" value="No" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.noChecked} onchange={handleNoChange}></lightning-input>
                                    </td>
                                    <td data-label="Repairs Made">
                                        <lightning-input type="checkbox" value="Repairs Made" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.repairsMadeChecked} onchange={handleAddNoteClick}></lightning-input>
                                    </td>
                                    <td data-label="NA">
                                        <lightning-input type="checkbox" value="NA" data-id={question.SF_ApiName__c} onchange={handleOptionChange}></lightning-input>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </lightning-card>
        </template>
    </div>
    <div class="accordion" style="display: flex;" onclick={toggleSection}>
            <div style="max-width: 897px; flex: 1;"  class="headinf">Refrigeration – Condensing Unit for the Freezer
                <lightning-icon style="margin:0.5rem;" size="xx-small" icon-position="right"
                    icon-name={medTempIcon5} 
                    alternative-text={buttonLabel}></lightning-icon>
            </div>
    </div>
    <div class={section5Class}>
        <template if:true={isVisible}>
            <lightning-card>
                <div class="slds-m-around_medium">
                    <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Yes</th>
                                <th scope="col">No</th>
                                <th scope="col">Repairs Made</th>
                                <th scope="col">NA</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template for:each={questions4} for:item="question" for:index="index">
                                <tr key={question.id}>
                                    <td data-label="Question" class="question-column"><p class="wrap-text">{question.Sr_Num__c}. {question.Question__c}</p></td>
                                    <td data-label="Yes">
                                        <lightning-input type="checkbox" value="Yes" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.yesChecked} onchange={handleYesChange}></lightning-input>
                                    </td>
                                    <td data-label="No">
                                        <lightning-input type="checkbox" value="No" name={question.Checklist_Name__c}  data-id={question.SF_ApiName__c} checked={question.noChecked} onchange={handleNoChange}></lightning-input>
                                    </td>
                                    <td data-label="Repairs Made">
                                        <lightning-input type="checkbox" value="Repairs Made" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.repairsMadeChecked} onchange={handleAddNoteClick}></lightning-input>
                                    </td>
                                    <td data-label="NA">
                                        <lightning-input type="checkbox" value="NA" data-id={question.SF_ApiName__c} onchange={handleOptionChange}></lightning-input>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </lightning-card>
        </template>
    </div>
    <div class="accordion" style="display: flex;" onclick={toggleSection}>
            <div style="max-width: 897px; flex: 1;"  class="headinf">Endless Cases Installation
                <lightning-icon style="margin:0.5rem;" size="xx-small" icon-position="right"
                    icon-name={medTempIcon6}
                    alternative-text={buttonLabel}></lightning-icon>
            </div>
    </div>
    <div class={section6Class}>
        <template if:true={isVisible}>
            <lightning-card>
                <div class="slds-m-around_medium">
                    <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Yes</th>
                                <th scope="col">No</th>
                                <th scope="col">Repairs Made</th>
                                <th scope="col">NA</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template for:each={questions5} for:item="question" for:index="index">
                                <tr key={question.id}>
                                    <td data-label="Question" class="question-column"><p class="wrap-text">{question.Sr_Num__c}. {question.Question__c}</p></td>
                                    <td data-label="Yes">
                                        <lightning-input type="checkbox" value="Yes" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.yesChecked} onchange={handleYesChange}></lightning-input>
                                    </td>
                                    <td data-label="No">
                                        <lightning-input type="checkbox" value="No" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.noChecked} onchange={handleNoChange}></lightning-input>
                                    </td>
                                    <td data-label="Repairs Made">
                                        <lightning-input type="checkbox" value="Repairs Made" name={question.Checklist_Name__c} data-id={question.SF_ApiName__c} checked={question.repairsMadeChecked} onchange={handleAddNoteClick}></lightning-input>
                                    </td>
                                    <td data-label="NA">
                                        <lightning-input type="checkbox" value="NA" data-id={question.SF_ApiName__c} onchange={handleOptionChange}></lightning-input>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </lightning-card>
        </template>
    </div>
    <div class="button-container">
        <lightning-button label="Submit" variant="brand" class="slds-align_absolute-center" onclick={handleSubmit}></lightning-button></a>
    </div>

<!--Modal Popup-->
    <template if:true={isPopupVisible}>
        <div class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 class="slds-text-heading_medium slds-hyphenate">Add Note and Upload Pictures for Repair Made</h2>
                    <button class="slds-button slds-button_icon slds-modal__close" title="Close" onclick={closePopup}>
                        <lightning-icon icon-name="utility:close" size="small"></lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                </header>
                <div class="slds-modal__content slds-p-around_medium">
                    <lightning-card title="Notes" icon-name="standard:note">
                        <textarea class="slds-textarea" placeholder="Enter note here..."
                        onchange={handleNoteInput}>{noteBody}</textarea>
                        <div style="padding-top: 10px; float:right">
                            <button class="slds-button slds-button_brand" onclick={handleSave}>Save</button>
                    <lightning-button variant="brand-outline" onclick={clearNote} label="Clear" style="padding-left: 10px;"></lightning-button>
                        </div>
                    </lightning-card>
                        <div class="slds-modal__content slds-p-around_medium" style="padding-top: 50px;">
                            <c-install-file-upload install-record={recordId}></c-install-file-upload>
                        </div>
                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={closePopup}>Close</button>
                </footer>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <!--Submit Modal-->
<!-- modal start -->      
    <template if:true={isShowModal}> 
    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
        <div class="slds-modal__container">
            <!-- modal header start -->
            <header class="slds-modal__header">
                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">{alert}</h2>
            </header>
            <!-- modal body start -->
            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                <p>{alertMessage}</p>
            </div>
            <!-- modal footer start-->
            <footer class="slds-modal__footer">
                <lightning-button variant="brand" label="OK" onclick={hideModalBox}></lightning-button>
            </footer>
        </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
<!-- modal end -->
</template>